import{m as j,u as E,V as K,a as B}from"./VList.029f541d.js";import{a4 as x,aB as T,N as D,a3 as L,E as S,G as b,_ as R,$ as z,ah as G,H as O,a as u,K as I,a0 as H,I as W,aC as q,F as J,a5 as Q,W as X,az as Y}from"./index.00d58326.js";import{f as M}from"./form.8c66ab6d.js";import{V as N,u as Z}from"./scopeId.ed60dd9b.js";import{V as w,a as ee}from"./VOverlay.8e0ebe4e.js";import{b as le,a as ae}from"./VCheckboxBtn.6d373ad5.js";import{a as te}from"./VTextField.94a3da79.js";const ne=x()({name:"VMenu",inheritAttrs:!1,props:{modelValue:Boolean,id:String,...T({transition:{component:N}})},emits:{"update:modelValue":e=>!0},setup(e,_){let{attrs:t,slots:f}=_;const r=D(e,"modelValue"),{scopeId:s}=Z(),m=L(),V=S(()=>e.id||`v-menu-${m}`),C=b(),l=R(w,null);let c=0;z(w,{register(){++c},unregister(){--c},closeParents(){setTimeout(()=>{c||(r.value=!1,l==null||l.closeParents())},40)}}),G(r,v=>{v?l==null||l.register():l==null||l.unregister()});function h(){l==null||l.closeParents()}return O(()=>u(ee,I({ref:C,modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,class:["v-menu"],transition:e.transition,absolute:!0,closeOnContentClick:!0,locationStrategy:"connected",scrollStrategy:"reposition",scrim:!1,openDelay:"300",closeDelay:"250",activatorProps:{"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":V.value},"onClick:outside":h},s,t),{default:f.default,activator:f.activator})),M({id:V},C)}}),oe=H({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:W,default:"$dropdown"},menuProps:{type:Object},modelValue:{type:null,default:()=>[]},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,...j({itemChildren:!1})},"select"),ve=x()({name:"VSelect",props:{...oe(),...T({transition:{component:N}})},emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,_){let{slots:t}=_;const{t:f}=q(),r=b(),s=D(e,"menu"),{items:m,transformIn:V,transformOut:C}=E(e),l=D(e,"modelValue",[],a=>V(Y(a)),a=>{var o;const i=C(a);return e.multiple?i:(o=i[0])!=null?o:null}),c=S(()=>l.value.map(a=>m.value.find(o=>o.value===a.value)||a)),h=S(()=>c.value.map(a=>a.props.value));function v(a){l.value=[],e.openOnClear&&(s.value=!0)}function F(){e.hideNoData&&!m.value.length||(s.value=!s.value)}function A(a){["Enter","ArrowDown"," "].includes(a.key)&&(s.value=!0),["Escape","Tab"].includes(a.key)&&(s.value=!1)}function g(a){if(e.multiple){const o=h.value.findIndex(i=>i===a.value);if(o===-1)l.value=[...l.value,a];else{const i=[...l.value];i.splice(o,1),l.value=i}}else l.value=[a],s.value=!1}return O(()=>{const a=!!(e.chips||t.chip);return u(te,{ref:r,modelValue:l.value.map(o=>o.props.value).join(", "),"onUpdate:modelValue":o=>{o==null&&(l.value=[])},validationValue:e.modelValue,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":v,"onClick:control":F,onBlur:()=>s.value=!1,onKeydown:A},{...t,default:()=>{var o,i,P,$;return u(J,null,[u(ne,I({modelValue:s.value,"onUpdate:modelValue":n=>s.value=n,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[u(K,{selected:h.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault()},{default:()=>[!m.value.length&&!e.hideNoData&&((o=(i=t["no-data"])==null?void 0:i.call(t))!=null?o:u(B,{title:f(e.noDataText)},null)),(P=t["prepend-item"])==null?void 0:P.call(t),m.value.map((n,d)=>{var y,p;return(y=(p=t.item)==null?void 0:p.call(t,{item:n,index:d,props:I(n.props,{onClick:()=>g(n)})}))!=null?y:u(B,I({key:d},n.props,{onClick:()=>g(n)}),{prepend:k=>{let{isSelected:U}=k;return e.multiple&&!e.hideSelected?u(le,{modelValue:U,ripple:!1},null):void 0}})}),($=t["append-item"])==null?void 0:$.call(t)]})]}),c.value.map((n,d)=>{function y(k){k.stopPropagation(),k.preventDefault(),g(n)}const p={"onClick:close":y,modelValue:!0};return u("div",{key:d,class:"v-select__selection"},[a?u(Q,{defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[t.chip?t.chip({item:n,index:d,props:p}):u(ae,p,null)]}):t.selection?t.selection({item:n,index:d}):u("span",{class:"v-select__selection-text"},[n.title,e.multiple&&d<c.value.length-1&&u("span",{class:"v-select__selection-comma"},[X(",")])])])})])}})}),M({menu:s,select:g},r)}});export{ve as V};
