import{m as j,u as E,V as L,a as B}from"./VList.fe61b665.js";import{Z as x,_ as T,M as _,$ as R,D as S,E as O,a0 as K,a1 as z,a2 as G,G as b,a as u,J as D,a3 as J,I as Z,a4 as q,F as H,a5 as Q,U as W,a6 as X}from"./index.e4f4be16.js";import{f as M}from"./form.0bbaacac.js";import{V as F,u as Y}from"./scopeId.e76ccd41.js";import{V as w,a as ee}from"./VOverlay.f03e4f25.js";import{V as le,a as ae}from"./VChip.39d4fdb1.js";import{V as te}from"./VTextField.0cadf745.js";const ne=x()({name:"VMenu",inheritAttrs:!1,props:{modelValue:Boolean,id:String,...T({transition:{component:F}})},emits:{"update:modelValue":e=>!0},setup(e,I){let{attrs:t,slots:f}=I;const r=_(e,"modelValue"),{scopeId:s}=Y(),m=R(),V=S(()=>e.id||`v-menu-${m}`),C=O(),l=K(w,null);let c=0;z(w,{register(){++c},unregister(){--c},closeParents(){setTimeout(()=>{c||(r.value=!1,l==null||l.closeParents())},40)}}),G(r,v=>{v?l==null||l.register():l==null||l.unregister()});function h(){l==null||l.closeParents()}return b(()=>u(ee,D({ref:C,modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,class:["v-menu"],transition:e.transition,absolute:!0,closeOnContentClick:!0,locationStrategy:"connected",scrollStrategy:"reposition",scrim:!1,openDelay:"300",closeDelay:"250",activatorProps:{"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":V.value},"onClick:outside":h},s,t),{default:f.default,activator:f.activator})),M({id:V},C)}}),oe=J({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Z,default:"$dropdown"},menuProps:{type:Object},modelValue:{type:null,default:()=>[]},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,...j({itemChildren:!1})},"select"),ve=x()({name:"VSelect",props:{...oe(),...T({transition:{component:F}})},emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:t}=I;const{t:f}=q(),r=O(),s=_(e,"menu"),{items:m,transformIn:V,transformOut:C}=E(e),l=_(e,"modelValue",[],a=>V(X(a)),a=>{var o;const i=C(a);return e.multiple?i:(o=i[0])!=null?o:null}),c=S(()=>l.value.map(a=>m.value.find(o=>o.value===a.value)||a)),h=S(()=>c.value.map(a=>a.props.value));function v(a){l.value=[],e.openOnClear&&(s.value=!0)}function N(){e.hideNoData&&!m.value.length||(s.value=!s.value)}function U(a){["Enter","ArrowDown"," "].includes(a.key)&&(s.value=!0),["Escape","Tab"].includes(a.key)&&(s.value=!1)}function g(a){if(e.multiple){const o=h.value.findIndex(i=>i===a.value);if(o===-1)l.value=[...l.value,a];else{const i=[...l.value];i.splice(o,1),l.value=i}}else l.value=[a],s.value=!1}return b(()=>{const a=!!(e.chips||t.chip);return u(te,{ref:r,modelValue:l.value.map(o=>o.props.value).join(", "),"onUpdate:modelValue":o=>{o==null&&(l.value=[])},validationValue:e.modelValue,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":v,"onClick:control":N,onBlur:()=>s.value=!1,onKeydown:U},{...t,default:()=>{var o,i,P,$;return u(H,null,[u(ne,D({modelValue:s.value,"onUpdate:modelValue":n=>s.value=n,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[u(L,{selected:h.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault()},{default:()=>[!m.value.length&&!e.hideNoData&&((o=(i=t["no-data"])==null?void 0:i.call(t))!=null?o:u(B,{title:f(e.noDataText)},null)),(P=t["prepend-item"])==null?void 0:P.call(t),m.value.map((n,d)=>{var y,p;return(y=(p=t.item)==null?void 0:p.call(t,{item:n,index:d,props:D(n.props,{onClick:()=>g(n)})}))!=null?y:u(B,D({key:d},n.props,{onClick:()=>g(n)}),{prepend:k=>{let{isSelected:A}=k;return e.multiple&&!e.hideSelected?u(le,{modelValue:A,ripple:!1},null):void 0}})}),($=t["append-item"])==null?void 0:$.call(t)]})]}),c.value.map((n,d)=>{function y(k){k.stopPropagation(),k.preventDefault(),g(n)}const p={"onClick:close":y,modelValue:!0};return u("div",{key:d,class:"v-select__selection"},[a?u(Q,{defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[t.chip?t.chip({item:n,index:d,props:p}):u(ae,p,null)]}):t.selection?t.selection({item:n,index:d}):u("span",{class:"v-select__selection-text"},[n.title,e.multiple&&d<c.value.length-1&&u("span",{class:"v-select__selection-comma"},[W(",")])])])})])}})}),M({menu:s,select:g},r)}});export{ve as V};
