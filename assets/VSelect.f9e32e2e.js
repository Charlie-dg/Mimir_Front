import{m as U,u as z,V as L,a as B}from"./VList.527cabe8.js";import{aj as x,aB as T,af as S,ai as R,a0 as _,a9 as b,ad as E,ae as K,an as q,z as O,a as u,ap as D,p as G,I as H,aC as J,F as Q,D as W,aa as X,az as Y}from"./index.250fd50a.js";import{f as M}from"./form.376311bc.js";import{V as F,u as Z}from"./scopeId.e974f990.js";import{V as w,a as ee}from"./VOverlay.30f78188.js";import{b as le,a as ae}from"./VCheckboxBtn.94e17887.js";import{a as te}from"./VTextField.660273e8.js";const ne=x()({name:"VMenu",inheritAttrs:!1,props:{modelValue:Boolean,id:String,...T({transition:{component:F}})},emits:{"update:modelValue":e=>!0},setup(e,I){let{attrs:t,slots:f}=I;const r=S(e,"modelValue"),{scopeId:s}=Z(),m=R(),V=_(()=>e.id||`v-menu-${m}`),C=b(),l=E(w,null);let c=0;K(w,{register(){++c},unregister(){--c},closeParents(){setTimeout(()=>{c||(r.value=!1,l==null||l.closeParents())},40)}}),q(r,v=>{v?l==null||l.register():l==null||l.unregister()});function h(){l==null||l.closeParents()}return O(()=>u(ee,D({ref:C,modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,class:["v-menu"],transition:e.transition,absolute:!0,closeOnContentClick:!0,locationStrategy:"connected",scrollStrategy:"reposition",scrim:!1,openDelay:"300",closeDelay:"250",activatorProps:{"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":V.value},"onClick:outside":h},s,t),{default:f.default,activator:f.activator})),M({id:V},C)}}),oe=G({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:H,default:"$dropdown"},menuProps:{type:Object},modelValue:{type:null,default:()=>[]},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,...U({itemChildren:!1})},"select"),ve=x()({name:"VSelect",props:{...oe(),...T({transition:{component:F}})},emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:t}=I;const{t:f}=J(),r=b(),s=S(e,"menu"),{items:m,transformIn:V,transformOut:C}=z(e),l=S(e,"modelValue",[],a=>V(Y(a)),a=>{var o;const i=C(a);return e.multiple?i:(o=i[0])!=null?o:null}),c=_(()=>l.value.map(a=>m.value.find(o=>o.value===a.value)||a)),h=_(()=>c.value.map(a=>a.props.value));function v(a){l.value=[],e.openOnClear&&(s.value=!0)}function N(){e.hideNoData&&!m.value.length||(s.value=!s.value)}function j(a){["Enter","ArrowDown"," "].includes(a.key)&&(s.value=!0),["Escape","Tab"].includes(a.key)&&(s.value=!1)}function g(a){if(e.multiple){const o=h.value.findIndex(i=>i===a.value);if(o===-1)l.value=[...l.value,a];else{const i=[...l.value];i.splice(o,1),l.value=i}}else l.value=[a],s.value=!1}return O(()=>{const a=!!(e.chips||t.chip);return u(te,{ref:r,modelValue:l.value.map(o=>o.props.value).join(", "),"onUpdate:modelValue":o=>{o==null&&(l.value=[])},validationValue:e.modelValue,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":v,"onClick:control":N,onBlur:()=>s.value=!1,onKeydown:j},{...t,default:()=>{var o,i,P,$;return u(Q,null,[u(ne,D({modelValue:s.value,"onUpdate:modelValue":n=>s.value=n,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[u(L,{selected:h.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault()},{default:()=>[!m.value.length&&!e.hideNoData&&((o=(i=t["no-data"])==null?void 0:i.call(t))!=null?o:u(B,{title:f(e.noDataText)},null)),(P=t["prepend-item"])==null?void 0:P.call(t),m.value.map((n,d)=>{var y,p;return(y=(p=t.item)==null?void 0:p.call(t,{item:n,index:d,props:D(n.props,{onClick:()=>g(n)})}))!=null?y:u(B,D({key:d},n.props,{onClick:()=>g(n)}),{prepend:k=>{let{isSelected:A}=k;return e.multiple&&!e.hideSelected?u(le,{modelValue:A,ripple:!1},null):void 0}})}),($=t["append-item"])==null?void 0:$.call(t)]})]}),c.value.map((n,d)=>{function y(k){k.stopPropagation(),k.preventDefault(),g(n)}const p={"onClick:close":y,modelValue:!0};return u("div",{key:d,class:"v-select__selection"},[a?u(W,{defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[t.chip?t.chip({item:n,index:d,props:p}):u(ae,p,null)]}):t.selection?t.selection({item:n,index:d}):u("span",{class:"v-select__selection-text"},[n.title,e.multiple&&d<c.value.length-1&&u("span",{class:"v-select__selection-comma"},[X(",")])])])})])}})}),M({menu:s,select:g},r)}});export{ve as V};
