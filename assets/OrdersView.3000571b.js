import{l as p,o as u,c as _,a as e,w as s,V as h,bg as b,S as v,d as n,b as t,F as g,n as y,i as f,k as x,t as c,bf as j,h as m}from"./index.1abab4fd.js";import{d as k,c as C,V as D,e as P}from"./VDialog.6ae4a7ab.js";import{V}from"./VTable.d53087bb.js";import{V as S}from"./VForm.177f6fbe.js";import"./createSimpleFunctional.c0a6c7b6.js";import"./VAvatar.39d795f4.js";import"./scopeId.ec03e723.js";import"./form.612ffd7c.js";import"./VOverlay.6f1acc69.js";const B={id:"admin-orders"},T=t("h1",{class:"text-center my-2"},"\u8A02\u55AE\u7BA1\u7406",-1),z=t("thead",null,[t("tr",null,[t("th",{class:"text-center text-h6"},"\u7DE8\u865F"),t("th",{class:"text-center text-h6"},"\u55AE\u865F"),t("th",{class:"text-center text-h6"},"\u65E5\u671F"),t("th",{class:"text-center text-h6"},"\u6703\u54E1"),t("th",{class:"text-center text-h6"},"\u91D1\u984D"),t("th",{class:"text-center text-h6"},"\u67E5\u770B"),t("th",{class:"text-center text-h6"},"\u522A\u9664")])],-1),F={class:"text-center"},L={class:"text-center"},N={class:"text-center"},$={class:"text-center"},q={class:"text-center"},A=m("mdi-eye"),E=m("mdi-delete"),U={key:1},I=t("td",{class:"text-center",colspan:"3"},"\u6C92\u6709\u8A02\u55AE",-1),O=[I],R=m("mdi-close"),G={class:"text-h5 font-weight-bold"},H={class:"text-h6 font-weight-bold"},J={class:"text-h6 font-weight-bold"},K={class:"text-h6 font-weight-bold"},M=t("div",{class:"text-h6 font-weight-bold"},"\u8A02\u8CFC\u5546\u54C1 :",-1),Q=t("thead",null,[t("tr",null,[t("th",{class:"text-center text-h6 font-weight-bold"},"\u5546\u54C1\u540D\u7A31"),t("th",{class:"text-center text-h6 font-weight-bold"},"\u5546\u54C1\u50F9\u683C"),t("th",{class:"text-center text-h6 font-weight-bold"},"\u8CFC\u8CB7\u6578\u91CF")])],-1),W={cols:"8"},X={class:"text-center text-subtitle-1"},Y={class:"text-center text-subtitle-1"},Z={class:"text-center text-subtitle-1"},_t={__name:"OrdersView",setup(tt){const i=p([]),l=p({_id:"",date:"",account:"",totalPrice:0,products:{},idx:-1,dialog:!1,valid:!1}),w=(d,a)=>{l._id=d,a>-1&&(l.date=i[a].date,l.account=i[a].user.account,l.totalPrice=i[a].totalPrice,l.products=i[a].products),l.idx=a,l.dialog=!0,l.valid=!1};return(async()=>{try{const{data:d}=await b.get("/orders/all");i.push(...d.result.map(a=>(a.totalPrice=a.products.reduce((o,r)=>o+r.product.price*r.quantity,0),a)))}catch(d){console.log(d),v.fire({icon:"error",title:"\u5931\u6557",text:d.isAxiosError?d.response.data.message:d.message})}})(),(d,a)=>(u(),_("div",B,[e(h,{class:"justify-center"},{default:s(()=>[e(n,{cols:"9"},{default:s(()=>[T]),_:1}),e(n,{cols:"9"},{default:s(()=>[e(h,{class:"justify-end align-center",style:{height:"150px"}})]),_:1}),e(n,{cols:"9"},{default:s(()=>[e(V,null,{default:s(()=>[z,t("tbody",null,[i.length>0?(u(!0),_(g,{key:0},y(i,(o,r)=>(u(),_("tr",{key:o._id},[t("td",F,c(r+1),1),t("td",L,c(o._id),1),t("td",N,c(new Date(o.date).toLocaleDateString()),1),t("td",$,c(o.user.account),1),t("td",q,c(o.totalPrice),1),t("td",null,[e(h,{class:"justify-center align-center"},{default:s(()=>[e(f,{onClick:st=>w(o._id,r),style:{width:"2rem",height:"2rem"},icon:"",variant:"text"},{default:s(()=>[e(x,{style:{"font-size":"large"},color:"purple lighten-2"},{default:s(()=>[A]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),t("td",null,[e(h,{class:"justify-center align-center"},{default:s(()=>[e(f,{style:{width:"2rem",height:"2rem"},icon:"",variant:"text"},{default:s(()=>[e(x,{style:{"font-size":"large"},color:"red lighten-2"},{default:s(()=>[E]),_:1})]),_:1})]),_:1})])]))),128)):(u(),_("tr",U,O))])]),_:1})]),_:1})]),_:1}),e(k,{modelValue:l.dialog,"onUpdate:modelValue":a[2]||(a[2]=o=>l.dialog=o),persistent:""},{default:s(()=>[e(S,{modelValue:l.valid,"onUpdate:modelValue":a[1]||(a[1]=o=>l.valid=o)},{default:s(()=>[e(C,null,{default:s(()=>[e(n,{class:"d-flex justify-end"},{default:s(()=>[e(f,{icon:"",variant:"text",size:"x-small",onClick:a[0]||(a[0]=o=>l.dialog=!1)},{default:s(()=>[e(x,null,{default:s(()=>[R]),_:1})]),_:1})]),_:1}),e(D,{class:"text-center my-2"},{default:s(()=>[t("div",G,"\u8A02\u55AE\u7DE8\u865F : "+c(l._id),1)]),_:1}),e(P,null,{default:s(()=>[e(j,null,{default:s(()=>[e(h,{class:"justify-center"},{default:s(()=>[e(n,{cols:"10"},{default:s(()=>[t("div",H,"\u8A02\u8CFC\u65E5\u671F : "+c(new Date(l.date).toLocaleDateString()),1)]),_:1}),e(n,{cols:"10"},{default:s(()=>[t("div",J,"\u6703\u54E1\u5E33\u865F : "+c(l.account),1)]),_:1}),e(n,{cols:"10"},{default:s(()=>[t("div",K,"\u8A02\u55AE\u91D1\u984D : $:"+c(l.totalPrice),1)]),_:1}),e(n,{class:"d-flex justify-center",cols:"10"},{default:s(()=>[e(h,null,{default:s(()=>[e(n,{class:"justify-start",cols:"2"},{default:s(()=>[M]),_:1}),e(n,{class:"justify-center",cols:"10"},{default:s(()=>[e(V,{height:"300px"},{default:s(()=>[Q,t("tbody",null,[(u(!0),_(g,null,y(l.products,(o,r)=>(u(),_("tr",W,[t("th",X,c(o.product.name),1),t("th",Y,c(o.product.price),1),t("th",Z,c(o.quantity),1)]))),256))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]))}};export{_t as default};
